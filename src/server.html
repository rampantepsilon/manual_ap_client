<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>Manual Archipelago Web Client</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <table style="width: 98vw; text-align: center; vertical-align: middle;">
        <tr>
            <td style="text-align: right; width:40%">Hostname:</td>
            <td style="text-align: left"><input id="hostname" type='text' class="login" size="40"
                    value="archipelago.gg"></td>
            <!--<td style="text-align: left"><input id="hostname" type='text' class="login" size="40" value="localhost">-->
            </td>
        </tr>
        <tr>
            <td style="text-align: right">Port:</td>
            <td style="text-align: left"><input id="port" type='text' class="login" size="40" value="38281"></td>
        </tr>
        <tr>
            <td style="text-align: right">Game Name:</td>
            <td style="text-align: left"><input id="game" type='text' class="login" size="40"
                    value="Manual_{Game}_{Creator}"></td>
            <!--<td style="text-align: left"><input id="game" type='text' class="login" size="40"
                    value="Manual_MarvelSNAP_JHobz"></td>-->
        </tr>
        <tr>
            <td style="text-align: right">Player Name:</td>
            <td style="text-align: left">
                <input id="player" type='text' class="login" size="40" value="Player 1">
                <!--<input id="player" type='text' class="login" size="40" value="REpsilonSNAP">-->
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <button onclick="connect()" style="width: 300px;">Connect</button>
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <div id="err" style="background-color: red;"></div>
            </td>
        </tr>
    </table>

    <script>
        function connect() {
            var host = document.getElementById('hostname').value;
            var port = document.getElementById('port').value;
            var game = document.getElementById('game').value;
            var player = document.getElementById('player').value;

            if (game.includes('Manual_')) {
                complete(host, port, game, player);
            } else {
                document.getElementById('err').innerHTML = "Invalid Game! Game must be a Manual AP world formatted as 'Manual_{Game}_{Creator}' or 'Manual_{Game}' (Second instance is rare).<br>Please correct and try again."
            }
        }

        function complete(host, port, game, player) {
            sessionStorage.setItem('host', host);
            sessionStorage.setItem('port', port);
            sessionStorage.setItem('game', game);
            sessionStorage.setItem('player', player);
            sessionStorage.setItem('locations', '');
            sessionStorage.setItem('uniqueCat', '');
            sessionStorage.setItem('items', '');
            sessionStorage.setItem('uniqueItems', '');

            window.location.href = './index.html'
        }
    </script>
</body>

</html>